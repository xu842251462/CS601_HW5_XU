<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta Info -->
    <meta charset="UTF-8">
    <meta name="description" content="BU MET CS601 - Assignment 5">
    <meta name="keywords" content="BU, MET, CS601, Assignment5, HTML">
    <meta name="author" content="Bin Xu">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Favicon -->
    <!-- Title -->
    <title>My Degrees</title>
    <!-- Stylesheets -->
    <style>
        body {
            width: 100%;
            background: radial-gradient(circle, #4dbd769c 0%, #3c888f93 100%);
        }
        .my_degrees {
            width: 60%;
            border: 3px solid #000000;
        }
        .my_degrees th, .my_degrees td {
            border: 1px solid #000000;
            padding: 2px;
        }
        .my_degrees th {
            background-color: rgb(204, 0, 0);
            color: #ffffff;
        }

        .my_degrees tr:hover {
            background-color: #dddddd;
        }
    </style>
    <!-- Scripts -->
</head>

<body>

    <button id="button">Click here to see my degrees!</button>

    <script>

        document.getElementById("button"),onclick = () => {
            getDegrees("./src/degrees.json")
            .then(data => console.log(appendData(data)))
            .catch(err => console.error(err))
        }

        // function getDegrees(url) {
        //     //create new promise
        //     const myPromise = new Promise((resolve, reject) => {
        //         let condition = true;
        //         if(condition) {
        //             const workDone = 'Promise is resolved successfully.'
        //             resolve(workDone);
        //         } else {
        //             const why = 'Promise is rejected';
        //             reject(why);
        //         }
        //     });
        //
        //     // myPromise.then((input) => {
        //     //     console.log('request successful:', appendData(input));
        //     // }).catch(err => {
        //     //     console.error(err);
        //     // });
        //
        // }
        const getDegrees = (fileName) => {
          return new Promise(((resolve, reject) => {
              let condition = true;
              if(condition) {
                  const workDone = 'Promise is resolved successfully.'
                  resolve(workDone);
              } else {
                  const why = 'Promise is rejected';
                  reject(why);
              }
          }))
        }




        // append data fetched in table format
        function appendData(data) {

            // data passed in
            const degrees = data;
            // key legends
            const keys = ["Year conferred", "Type", "School", "Program/Major"];

            // create table properties
            let table = document.createElement('table');
            let tableHead = document.createElement('thead');
            let tableBody = document.createElement('tbody');

            // header row
            let headerRow = document.createElement('tr');
            for (let i = 0; i < keys.length; i++) {
                let cell = document.createElement('th');
                cell.appendChild(document.createTextNode(keys[i]));
                headerRow.appendChild(cell);
            }
            tableHead.appendChild(headerRow);
            table.appendChild(tableHead);

            // body rows
            degrees.forEach(entry => {
                let row = document.createElement('tr');
                for (let i = 0; i < keys.length; i++) {
                    let cell = document.createElement('td');
                    cell.appendChild(document.createTextNode(entry.degree[keys[i]]));
                    row.appendChild(cell);
                }
                tableBody.appendChild(row);
            });
            table.appendChild(tableBody);

            // add table to body
            table.setAttribute("class", "degrees");
            document.body.appendChild(table);

            // hide button
            document.getElementById("button").style.visibility = 'hidden';
        };


    </script>

</body>

</html>

